{% extends 'base.html' %}
{% load custom_tags %}
<!--hola-->

{% load static %}
{% load mathfilters %}

{% block title %} {{request.user.profile.client}}   INSPECTION {{inspection.0.0.0}} {% endblock%}

{% block PageTitle %}{{request.user.profile.client}} || {{warehouseName.0.0.0}} {% endblock %}

{% block PageInfo %}
<div >
    <p>{{warehouseName.0.0.1}},{{warehouseName.0.0.2}},<br>{{warehouseName.0.0.3}}<br>
        Inspection date:{{inspection.0.0.1}} || Description : {{inspection.0.0.0}} </p></div>
{% endblock %}


{% block indicators %}

{% endblock %}

{% block content %}


<div class="row">
    <!-- Left col -->
    <section class="col-lg-10   connectedSortable">
        <!-- Custom tabs (TABLE)-->
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-3"><h3 class="card-title text-bold">Position | Unit match</h3></div>
                            <div class="col-md-4">Showing Records: {{request.GET.offset }} {{readedCount|sub:request.GET.qty}}</div>
                            <div class="col-md-5">
                                <nav aria-label="Page navigation example">
                                    <ul class="pagination">
                                        {% if  request.GET.offset > "0" %}
                                        <li class="page-item">
                                            <a class="page-link" href="all?id_inspection={{request.GET.id_inspection}}&qty={{request.GET.qty}}&offset={{request.GET.offset|sub:request.GET.qty}}" aria-label="Previous">
                                                <span aria-hidden="true">&laquo; 500</span>
                                            </a>
                                        </li>
                                        {% endif %}
                                        <li class="page-item"><a class="page-link" href="all?id_inspection={{request.GET.id_inspection}}&qty={{readedCount}}&offset=0">get All Data</a></li>
                                        <li class="page-item">
                                            <a class="page-link" href="all?id_inspection={{request.GET.id_inspection}}&qty={{request.GET.qty}}&offset={{request.GET.qty|add:request.GET.offset}}" aria-label="Next">
                                                <span aria-hidden="true">500 &raquo;</span>
                                            </a>
                                        </li>


                                    </ul>
                                </nav>

                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.card-header -->
                <div class="card-body">
                    <table id="table1" name="example1" class="table  table-bordered table-striped dataTable dtr-inline" role="grid" aria-describedby="table1_info">
                        <thead>
                        <tr role="row">
                            {% for col in description %}
                             {% if forloop.last  %}
                                {% if request.GET.pic == '0' %}
                                {% endif %}
                            {% else %}
                            <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">{{col}}</th>
                            {% endif %}
                            {% endfor %}
                        </tr>
                        </thead>
                        <tbody>
                        {% for row in data %}
                        <tr role="row" class="odd {% if request.GET.matching == '1' and row.3 != row.4  %}bg-danger{% endif %}">
                            {% for item in row %}

                                {% if forloop.last  %}
                                {% if request.GET.pic == '1' %}
                                <td>
                                <div class="text-center">
                                    {% if row.3 != row.4  %}
                                    <a href="media/smarti/{{item}}" ><img src="media/smarti/{{item}}" class="rounded" alt="..." style="width: 200px; height: 200px;"></a>
                                    {% endif %}
                                </div>
                                </td>
                                {% endif %}
                                {% else %}
                                <td>{{item}}</td>

                                {% endif %}

                            {% endfor %}

                        </tr>
                        {% endfor %}
                        </tbody>
                        <tfoot>
                        <tr role="row">
                            {% for col in description %}
                            <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">{{col}}</th>
                            {% endfor %}
                        </tr>
                        </tfoot>
                    </table>


                </div>
                <!-- /.card-body -->
            </div>

            <!-- /.card -->
            <!-- /.card -->
    </section>

    <div class="col-md-2">
        <div class="row">
            <div class="col">
        <form method = "post" action="">
            {% csrf_token %}
            <button type="submit" id="exportData" class="btn btn-block btn-secondary">Export all Data</button>
        </form><br>
            </div>
        </div>
        {% include '_includes/indicators.html' %}
    </div>


    <!-- /.Left col -->
    <!-- right col (We are only adding the ID to make the widgets sortable)-->

    <!-- right col -->
</div>

{% endblock %}

{% block pageScripts %}
<script>
  $(document).ready(function() {

    $("#table1").DataTable({
      "responsive": true,
      "autoWidth": true,
      "lengthMenu": [[50, 100, 500, -1], [50, 100, 500, "All"]]
    });

} );
</script>
{% endblock %}